<!DOCTYPE html>
<html lang="en">
  <%
     // window.addEventListener('load', function () {
      console.log('booking.js loaded');

    %>
<head>
  <%- include('../partials/head') %>
  <script src='/booking.js' type="text/js"></script>
  <link rel="stylesheet" type="text/css" href='/style.css'>
  
</head>

<body>
  <%- include('../partials/nav') %>
  <% let selectedBuilding = 0%>

  <div class='grid-container'>
    <div class='grid-item' id='select-time'>
      Select Booking Range <br>
      

      <button id="termBtn" onclick="selectTerm()">Term</button> 
      <button id="dateBtn" onclick="selectDate()">Date</button>
      <br>
      <div id='date-selection' hidden>
        <label for="start-date">Start Date
          <br>
        <input type=date id="start-date" name="start-date">
        </label>
        <br>
        <label for="end-date">End Date
          <br>
        <input type=date id="end-date" name="End of Booking">
        </label>
      </div>
      <div id="term-selection">
      <label class="term-row">
        <input type="checkbox" class="term-checkbox">
        <span class="checkmark"></span>
        Fall 2023/2024
      </label>
      <br>
      <label class="term-row">
        <input type="checkbox" class="term-checkbox">
        <span class="checkmark"></span>
        Spring 2023/2024
      </label>
      <br>
      <label class="term-row">
        <input type="checkbox" class="term-checkbox">
        <span class="checkmark"></span>
        Summer 2023/2024
      </label>
    </div>
    </div>
    <div class='grid-item' id='select-building'>
      <div id='Btitle' class='building-grid-item'>
        Select building
      </div>
      <%b_data.forEach(b => {
        %>
        <div id='B<%=b.BuildingNo%>' class='building-grid-item'>
          <button id="B1btn" class="building-btn <%if(b.AvailableRooms >0){%>available<%} else{%>unavailable<%}%>" 
            onclick="selectBuilding('<%= b.BuildingNo%>')" 
            <%if(b.AvailableRooms ==0){%> disabled <%}%> >
            Building <%= b.BuildingNo %><br> Available Rooms:<%=b.AvailableRooms%>
          </button>
        </div>

         <%
      });%>
    </div>
    <div class='grid-item' id='select-room'>
      <div class='box-title' id='room-title'>
        <%if(selectedBuilding > 0) {%>
          Select Room in Building <%=selectedBuilding%>
        <% } else { %>
          Please Select a Building
        <% } %>
      </div>
      <div class='apartment' id="apt-1">
        <div class='room' id='room-1'>1</div>
        <div class='room' id='room-2'>2</div>
        <div class='room' id='room-3'>3</div>
      </div>
      <div class='apartment' id="apt-2">
        <div class='room' id='room-4'>4</div>
        <div class='room' id='room-5'>5</div>
        <div class='room' id='room-6'>6</div>
      </div>
      <div class='apartment' id="apt-3">
        <div class='room' id='room-7'>7</div>
        <div class='room' id='room-8'>8</div>
        <div class='room' id='room-9'>9</div>
      </div>
      <div class='apartment' id="apt-4">
        <div class='room' id='room-10'>10</div>
        <div class='room' id='room-11'>11</div>
        <div class='room' id='room-12'>12</div>
      </div>
    </div>
    <div class='grid-item' id='select-floor'>
      <div class='box-title'>
        Select Floor
      </div>
      <div class='floor' id='floor-1'>1</div>
      <div class='floor' id='floor-2'>2</div>
      <div class='floor' id='floor-3'>3</div>
      <div class='floor' id='floor-4'>4</div>
      <div class='floor' id='floor-5'>5</div>
    </div>
    <div class='grid-item' id='selection-info'>
      Room Information
      <a href="Payment.html">Proceed to Payment</a>
    </div>

  </div>

</body>

</html>
<script>
    let selectTerm = function() {
      dateStatus = 0;
      console.log("term");
      document.getElementById("term-selection").hidden= false;
      document.getElementById("date-selection").hidden= true;
    };
    let selectDate = function() {
      dateStatus = 0;
      console.log("date");
      document.getElementById("term-selection").hidden= true;
      document.getElementById("date-selection").hidden= false;
    };
    function selectBuilding(bNo) {
      console.log("selected building "+bNo);
      selectedBuilding = bNo;
      document.getElementById('room-title').innerText = "Select Room in Building "+bNo;

    };
</script>

